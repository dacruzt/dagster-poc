services:
  dagster:
    build: .
    ports:
      - "3000:3000"
    environment:
      - AWS_PROFILE=${AWS_PROFILE:-default}
      - AWS_DEFAULT_REGION=${AWS_DEFAULT_REGION:-us-east-1}
    volumes:
      # Montar c√≥digo para desarrollo (hot reload)
      - ./dagster_poc:/app/dagster_poc:ro
      # Persistir datos de Dagster
      - dagster_storage:/app/storage
      # Montar credenciales de AWS CLI/SSO
      - ~/.aws:/root/.aws:ro
    restart: unless-stopped

volumes:
  dagster_storage:
